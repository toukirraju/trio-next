{"version":3,"file":"ContextMenu.jsx","sourceRoot":"","sources":["ContextMenu.tsx"],"names":[],"mappings":"AAAA,iBAAiB;AACjB,OAAO,KAAK,EAAE,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AACtC,OAAO,EACL,WAAW,EACX,MAAM,EACN,IAAI,EACJ,KAAK,EACL,KAAK,EACL,UAAU,EACV,eAAe,EACf,UAAU,EACV,aAAa,GACd,MAAM,oBAAoB,CAAC;AAS5B,MAAM,WAAW,GAAG,CAAC,EACnB,QAAQ,EACR,SAAS,EACT,SAAS,EACT,cAAc,GACG,EAAE,EAAE;IACrB,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClD,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;IAE9B,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,WAAW,CAAC;QACpD,UAAU,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC;QACvE,oBAAoB,EAAE,UAAU;QAChC,IAAI,EAAE,MAAM;QACZ,YAAY,EAAE,SAAS;KACxB,CAAC,CAAC;IAEH,MAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IACpC,MAAM,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,GAAG,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IAE3E,MAAM,iBAAiB,GAAG,CAAC,CAAiC,EAAE,EAAE;QAC9D,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,SAAS,CAAC,IAAI,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO,CACL,EACE;MAAA,CAAC,KAAK,CAAC,YAAY,CACjB,QAAQ,EACR,iBAAiB,CAAC;YAChB,GAAG,EAAE,IAAI,CAAC,YAAY;YACtB,aAAa,EAAE,iBAAiB;SACjC,CAAC,CACH,CACD;MAAA,CAAC,MAAM,IAAI,CACT,CAAC,GAAG,CACF,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CACtB,KAAK,CAAC,CAAC;gBACL,QAAQ,EAAE,QAAQ;gBAClB,GAAG,EAAE,CAAC,IAAI,CAAC;gBACX,IAAI,EAAE,CAAC,IAAI,CAAC;gBACZ,KAAK,EAAE,aAAa;gBACpB,MAAM,EAAE,IAAI;aACb,CAAC,CACF,IAAI,gBAAgB,EAAE,CAAC,CAEvB;UAAA,CAAC,GAAG,CAAC,SAAS,CAAC,sEAAsE,CACnF;YAAA,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,IAAI,EAAE,EAAE,CACtC,KAAK,CAAC,YAAY,CAAC,IAAI,EAAE;gBACvB,OAAO,EAAE,GAAG,EAAE;oBACZ,IAAI,IAAI,CAAC,KAAK,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,UAAU,EAAE,CAAC;wBAC3D,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;oBACvB,CAAC;oBAED,SAAS,CAAC,KAAK,CAAC,CAAC;gBACnB,CAAC;aACF,CAAC,CACH,CACD;YAAA,CAAC,cAAc,IAAI,CACjB,CAAC,aAAa,CACZ,GAAG,CAAC,CAAC,QAAQ,CAAC,CACd,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,IAAI,CAAC,CAAC,SAAS,IAAI,OAAO,CAAC,EAC3B,CACH,CACH;UAAA,EAAE,GAAG,CACP;QAAA,EAAE,GAAG,CAAC,CACP,CACH;IAAA,GAAG,CACJ,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,WAAW,CAAC","sourcesContent":["// ContextMenu.js\r\nimport React, { useRef } from \"react\";\r\nimport {\r\n  useFloating,\r\n  offset,\r\n  flip,\r\n  shift,\r\n  arrow,\r\n  autoUpdate,\r\n  useInteractions,\r\n  useDismiss,\r\n  FloatingArrow,\r\n} from \"@floating-ui/react\";\r\n\r\ntype ContextMenuProps = {\r\n  children: React.ReactElement;\r\n  menuItems: React.ReactElement[];\r\n  arrowFill?: string;\r\n  indicatorArrow?: boolean;\r\n};\r\n\r\nconst ContextMenu = ({\r\n  children,\r\n  menuItems,\r\n  arrowFill,\r\n  indicatorArrow,\r\n}: ContextMenuProps) => {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const arrowRef = useRef(null);\r\n\r\n  const { x, y, refs, strategy, context } = useFloating({\r\n    middleware: [offset(10), flip(), shift(), arrow({ element: arrowRef })],\r\n    whileElementsMounted: autoUpdate,\r\n    open: isOpen,\r\n    onOpenChange: setIsOpen,\r\n  });\r\n\r\n  const dismiss = useDismiss(context);\r\n  const { getReferenceProps, getFloatingProps } = useInteractions([dismiss]);\r\n\r\n  const handleContextMenu = (e: { preventDefault: () => void }) => {\r\n    e.preventDefault();\r\n    setIsOpen(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {React.cloneElement(\r\n        children,\r\n        getReferenceProps({\r\n          ref: refs.setReference,\r\n          onContextMenu: handleContextMenu,\r\n        })\r\n      )}\r\n      {isOpen && (\r\n        <div\r\n          ref={refs.setFloating}\r\n          style={{\r\n            position: strategy,\r\n            top: y ?? 0,\r\n            left: x ?? 0,\r\n            width: \"max-content\",\r\n            zIndex: 1000,\r\n          }}\r\n          {...getFloatingProps()}\r\n        >\r\n          <div className=\"bg-primary-200 dark:bg-primary-700 shadow-md rounded-md p-2 relative\">\r\n            {React.Children.map(menuItems, (item) =>\r\n              React.cloneElement(item, {\r\n                onClick: () => {\r\n                  if (item.props && typeof item.props.onClick === \"function\") {\r\n                    item.props.onClick();\r\n                  }\r\n\r\n                  setIsOpen(false);\r\n                },\r\n              })\r\n            )}\r\n            {indicatorArrow && (\r\n              <FloatingArrow\r\n                ref={arrowRef}\r\n                context={context}\r\n                fill={arrowFill || \"white\"}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ContextMenu;\r\n"]}